<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="4976px" preserveAspectRatio="none" style="width:2299px;height:4976px;" version="1.1" viewBox="0 0 2299 4976" width="2299px" zoomAndPan="magnify"><defs><filter height="300%" id="fxsbkwoyln07u" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="644" x="825.5" y="29.4023">1.0.0. Send Notification to Participant (Payer/Payee) (single message) v2.0</text><rect fill="#FFFFE0" height="4929.1973" style="stroke:#A80036;stroke-width:1.0;" width="1070.5" x="16" y="41.1992"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="500.75" y="53.7676">Central Service</text><rect fill="#E0FFFF" height="4929.1973" style="stroke:#A80036;stroke-width:1.0;" width="748" x="1088.5" y="41.1992"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="128" x="1398.5" y="53.7676">Notification Engine</text><rect fill="#D3D3D3" height="4929.1973" style="stroke:#A80036;stroke-width:1.0;" width="266" x="1838.5" y="41.1992"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="260" x="1841.5" y="53.7676">Financial Service Provider (Participant)</text><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="88.5" y="199.6191"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="88.5" y="4179.4551"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="4009.8359" style="stroke:#A80036;stroke-width:1.0;" width="10" x="306.5" y="199.6191"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="58.6211" style="stroke:#A80036;stroke-width:1.0;" width="10" x="306.5" y="4733.9766"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="887.5" y="383.4824"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="887.5" y="692.4746"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="887.5" y="1001.4668"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="887.5" y="1310.459"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="887.5" y="1628.8066"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="887.5" y="1944.7988"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="887.5" y="2253.791"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="887.5" y="2562.7832"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="887.5" y="2871.7754"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="887.5" y="3165.8125"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="887.5" y="3474.8047"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="887.5" y="3783.7969"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="125.6211" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1177" y="4143.1445"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1177" y="4828.9082"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="620.1426" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1485" y="4238.7656"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1755" y="4704.666"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="82.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1755" y="4792.5977"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="4705.9102" style="stroke:#000000;stroke-width:2.0;" width="2275" x="10" y="160.998"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="46.6211" style="stroke:#000000;stroke-width:2.0;" width="883" x="209.5" y="244.6191"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="3742.9727" style="stroke:#000000;stroke-width:2.0;" width="800" x="189.5" y="305.2402"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="3711.6621" style="stroke:#000000;stroke-width:2.0;" width="780" x="199.5" y="329.5508"/><rect fill="#FFFFFF" height="308.9922" style="stroke:none;stroke-width:1.0;" width="780" x="199.5" y="640.8984"/><rect fill="#FFFFFF" height="308.9922" style="stroke:none;stroke-width:1.0;" width="780" x="199.5" y="949.8906"/><rect fill="#FFFFFF" height="634.3398" style="stroke:none;stroke-width:1.0;" width="780" x="199.5" y="1258.8828"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="311.3477" style="stroke:#000000;stroke-width:2.0;" width="760" x="209.5" y="1574.875"/><rect fill="#FFFFFF" height="308.9922" style="stroke:none;stroke-width:1.0;" width="780" x="199.5" y="1893.2227"/><rect fill="#FFFFFF" height="308.9922" style="stroke:none;stroke-width:1.0;" width="780" x="199.5" y="2202.2148"/><rect fill="#FFFFFF" height="308.9922" style="stroke:none;stroke-width:1.0;" width="780" x="199.5" y="2511.207"/><rect fill="#FFFFFF" height="603.0293" style="stroke:none;stroke-width:1.0;" width="780" x="199.5" y="2820.1992"/><rect fill="#FFFFFF" height="308.9922" style="stroke:none;stroke-width:1.0;" width="780" x="199.5" y="3423.2285"/><rect fill="#FFFFFF" height="308.9922" style="stroke:none;stroke-width:1.0;" width="780" x="199.5" y="3732.2207"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="46.6211" style="stroke:#000000;stroke-width:2.0;" width="1072" x="209.5" y="4104.5234"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="283.6582" style="stroke:#000000;stroke-width:2.0;" width="884.5" x="1390.5" y="4326.0762"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="134.5527" style="stroke:#000000;stroke-width:2.0;" width="1633" x="209.5" y="4666.0449"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="93" x2="93" y1="143.998" y2="4883.9082"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="311.5" x2="311.5" y1="143.998" y2="4883.9082"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="892.5" x2="892.5" y1="143.998" y2="4883.9082"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1025.5" x2="1025.5" y1="143.998" y2="4883.9082"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1181.5" x2="1181.5" y1="143.998" y2="4883.9082"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1489.5" x2="1489.5" y1="143.998" y2="4883.9082"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1759.5" x2="1759.5" y1="143.998" y2="4883.9082"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1971" x2="1971" y1="143.998" y2="4883.9082"/><rect fill="#FEFECE" filter="url(#fxsbkwoyln07u)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="139" x="24" y="104.5098"/><rect fill="#FEFECE" filter="url(#fxsbkwoyln07u)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="139" x="20" y="108.5098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="27" y="129.0449">Notification-Topic</text><rect fill="#FEFECE" filter="url(#fxsbkwoyln07u)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="139" x="24" y="4882.9082"/><rect fill="#FEFECE" filter="url(#fxsbkwoyln07u)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="139" x="20" y="4886.9082"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="27" y="4907.4434">Notification-Topic</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="178" x="219.5" y="141.0449">Notification Event Handler</text><ellipse cx="311.5" cy="111.5098" fill="#FEFECE" filter="url(#fxsbkwoyln07u)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="307.5,99.5098,313.5,94.5098,311.5,99.5098,313.5,104.5098,307.5,99.5098" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="178" x="219.5" y="4896.4434">Notification Event Handler</text><ellipse cx="311.5" cy="4915.3965" fill="#FEFECE" filter="url(#fxsbkwoyln07u)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="307.5,4903.3965,313.5,4898.3965,311.5,4903.3965,313.5,4908.3965,307.5,4903.3965" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="825.5" y="141.0449">Central Service API</text><path d="M872,99.5098 L872,123.5098 M872,111.5098 L889,111.5098 " fill="none" filter="url(#fxsbkwoyln07u)" style="stroke:#A80036;stroke-width:2.0;"/><ellipse cx="901" cy="111.5098" fill="#FEFECE" filter="url(#fxsbkwoyln07u)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="825.5" y="4896.4434">Central Service API</text><path d="M872,4903.3965 L872,4927.3965 M872,4915.3965 L889,4915.3965 " fill="none" filter="url(#fxsbkwoyln07u)" style="stroke:#A80036;stroke-width:2.0;"/><ellipse cx="901" cy="4915.3965" fill="#FEFECE" filter="url(#fxsbkwoyln07u)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="969.5" y="141.0449">Persistant Store</text><path d="M1008,91.5098 C1008,81.5098 1026,81.5098 1026,81.5098 C1026,81.5098 1044,81.5098 1044,91.5098 L1044,117.5098 C1044,127.5098 1026,127.5098 1026,127.5098 C1026,127.5098 1008,127.5098 1008,117.5098 L1008,91.5098 " fill="#FEFECE" filter="url(#fxsbkwoyln07u)" style="stroke:#000000;stroke-width:1.5;"/><path d="M1008,91.5098 C1008,101.5098 1026,101.5098 1026,101.5098 C1026,101.5098 1044,101.5098 1044,91.5098 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="969.5" y="4896.4434">Persistant Store</text><path d="M1008,4909.3965 C1008,4899.3965 1026,4899.3965 1026,4899.3965 C1026,4899.3965 1044,4899.3965 1044,4909.3965 L1044,4935.3965 C1044,4945.3965 1026,4945.3965 1026,4945.3965 C1026,4945.3965 1008,4945.3965 1008,4935.3965 L1008,4909.3965 " fill="#FEFECE" filter="url(#fxsbkwoyln07u)" style="stroke:#000000;stroke-width:1.5;"/><path d="M1008,4909.3965 C1008,4919.3965 1026,4919.3965 1026,4919.3965 C1026,4919.3965 1044,4919.3965 1044,4909.3965 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#FEFECE" filter="url(#fxsbkwoyln07u)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="171" x="1096.5" y="104.5098"/><rect fill="#FEFECE" filter="url(#fxsbkwoyln07u)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="171" x="1092.5" y="108.5098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="157" x="1099.5" y="129.0449">NotificationsCommand</text><rect fill="#FEFECE" filter="url(#fxsbkwoyln07u)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="171" x="1096.5" y="4882.9082"/><rect fill="#FEFECE" filter="url(#fxsbkwoyln07u)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="171" x="1092.5" y="4886.9082"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="157" x="1099.5" y="4907.4434">NotificationsCommand</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="173" x="1400.5" y="141.0449">Notification Cmd Handler</text><ellipse cx="1490" cy="111.5098" fill="#FEFECE" filter="url(#fxsbkwoyln07u)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="1486,99.5098,1492,94.5098,1490,99.5098,1492,104.5098,1486,99.5098" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="173" x="1400.5" y="4896.4434">Notification Cmd Handler</text><ellipse cx="1490" cy="4915.3965" fill="#FEFECE" filter="url(#fxsbkwoyln07u)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="1486,4903.3965,1492,4898.3965,1490,4903.3965,1492,4908.3965,1486,4903.3965" style="stroke:#A80036;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#fxsbkwoyln07u)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="137" x="1691.5" y="104.5098"/><rect fill="#FEFECE" filter="url(#fxsbkwoyln07u)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="137" x="1687.5" y="108.5098"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="123" x="1694.5" y="129.0449">NotificationsEvent</text><rect fill="#FEFECE" filter="url(#fxsbkwoyln07u)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="137" x="1691.5" y="4882.9082"/><rect fill="#FEFECE" filter="url(#fxsbkwoyln07u)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="137" x="1687.5" y="4886.9082"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="123" x="1694.5" y="4907.4434">NotificationsEvent</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="1932" y="141.0449">Participant</text><ellipse cx="1971.5" cy="70.5098" fill="#FEFECE" filter="url(#fxsbkwoyln07u)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M1971.5,78.5098 L1971.5,105.5098 M1958.5,86.5098 L1984.5,86.5098 M1971.5,105.5098 L1958.5,120.5098 M1971.5,105.5098 L1984.5,120.5098 " fill="none" filter="url(#fxsbkwoyln07u)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="1932" y="4896.4434">Participant</text><ellipse cx="1971.5" cy="4909.3965" fill="#FEFECE" filter="url(#fxsbkwoyln07u)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M1971.5,4917.3965 L1971.5,4944.3965 M1958.5,4925.3965 L1984.5,4925.3965 M1971.5,4944.3965 L1958.5,4959.3965 M1971.5,4944.3965 L1984.5,4959.3965 " fill="none" filter="url(#fxsbkwoyln07u)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="88.5" y="199.6191"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="88.5" y="4179.4551"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="4009.8359" style="stroke:#A80036;stroke-width:1.0;" width="10" x="306.5" y="199.6191"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="58.6211" style="stroke:#A80036;stroke-width:1.0;" width="10" x="306.5" y="4733.9766"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="887.5" y="383.4824"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="887.5" y="692.4746"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="887.5" y="1001.4668"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="887.5" y="1310.459"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="887.5" y="1628.8066"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="887.5" y="1944.7988"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="887.5" y="2253.791"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="887.5" y="2562.7832"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="887.5" y="2871.7754"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="887.5" y="3165.8125"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="887.5" y="3474.8047"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="887.5" y="3783.7969"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="125.6211" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1177" y="4143.1445"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1177" y="4828.9082"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="620.1426" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1485" y="4238.7656"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="29.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1755" y="4704.666"/><rect fill="#FFFFFF" filter="url(#fxsbkwoyln07u)" height="82.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1755" y="4792.5977"/><path d="M10,160.998 L269,160.998 L269,167.998 L259,177.998 L10,177.998 L10,160.998 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="4705.9102" style="stroke:#000000;stroke-width:2.0;" width="2275" x="10" y="160.998"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="214" x="25" y="174.5664">Send notification to Participants</text><polygon fill="#A80036" points="109.5,195.6191,99.5,199.6191,109.5,203.6191,105.5,199.6191" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="103.5" x2="305.5" y1="199.6191" y2="199.6191"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="115.5" y="194.877">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="128.5" y="194.877">Consume Notification event</text><path d="M209.5,244.6191 L271.5,244.6191 L271.5,251.6191 L261.5,261.6191 L209.5,261.6191 L209.5,244.6191 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:2.0;" width="883" x="209.5" y="244.6191"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="224.5" y="258.1875">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="244" x="286.5" y="257.2539">[transport.options.deliver-report === true]</text><polygon fill="#A80036" points="1014,279.2402,1024,283.2402,1014,287.2402,1018,283.2402" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="316.5" x2="1020" y1="283.2402" y2="283.2402"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="323.5" y="278.498">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="336.5" y="278.498">Record Notification event</text><path d="M189.5,305.2402 L323.5,305.2402 L323.5,312.2402 L313.5,322.2402 L189.5,322.2402 L189.5,305.2402 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="3742.9727" style="stroke:#000000;stroke-width:2.0;" width="800" x="189.5" y="305.2402"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="89" x="204.5" y="318.8086">Routing logic</text><path d="M199.5,329.5508 L261.5,329.5508 L261.5,336.5508 L251.5,346.5508 L199.5,346.5508 L199.5,329.5508 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="3711.6621" style="stroke:#000000;stroke-width:2.0;" width="780" x="199.5" y="329.5508"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="214.5" y="343.1191">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="518" x="276.5" y="342.1855">[event.type === 'notification' &amp;&amp; event.action === 'prepare' &amp;&amp; event.status === 'success']</text><polygon fill="#A80036" points="327.5,379.4824,317.5,383.4824,327.5,387.4824,323.5,383.4824" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="875.5,379.4824,885.5,383.4824,875.5,387.4824,879.5,383.4824" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="321.5" x2="881.5" y1="383.4824" y2="383.4824"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="333.5" y="371.085">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="283" x="346.5" y="363.4297">Return Endpoint details for Payee-Participant</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="346.5" y="378.7402">Error codes:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="430.5" y="378.7402">3202, 3203</text><line style="stroke:#A80036;stroke-width:1.0;" x1="316.5" x2="358.5" y1="442.793" y2="442.793"/><line style="stroke:#A80036;stroke-width:1.0;" x1="358.5" x2="358.5" y1="442.793" y2="455.793"/><line style="stroke:#A80036;stroke-width:1.0;" x1="317.5" x2="358.5" y1="455.793" y2="455.793"/><polygon fill="#A80036" points="327.5,451.793,317.5,455.793,327.5,459.793,323.5,455.793" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="323.5" y="438.0508">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="512" x="336.5" y="438.0508">Construct NotifyCmd Command Message with enriched message &amp; endpoint data</text><path d="M321,468.793 L321,631.793 L763,631.793 L763,478.793 L753,468.793 L321,468.793 " fill="#FFFF00" filter="url(#fxsbkwoyln07u)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M753,468.793 L753,478.793 L763,478.793 L753,468.793 " fill="#FFFF00" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="327" y="486.3613">"transport": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="343" y="501.6719">"type": "HTTP",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="343" y="516.9824">"method": "POST",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="343" y="532.293">"recipient": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="389" x="359" y="547.6035">"endpoint": "http://Payee-Participant/transfers/{{transferId}}",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="359" y="562.9141">"params": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="375" y="578.2246">"transferId": "{transferId}"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="359" y="593.5352">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="343" y="608.8457">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="327" y="624.1563">}</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="199.5" x2="979.5" y1="641.8984" y2="641.8984"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="610" x="204.5" y="652.5332">[event.type === 'notification' &amp;&amp; event.action === 'prepare.*|position-prepare' &amp;&amp; event.status === 'error']</text><polygon fill="#A80036" points="327.5,688.4746,317.5,692.4746,327.5,696.4746,323.5,692.4746" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="875.5,688.4746,885.5,692.4746,875.5,696.4746,879.5,692.4746" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="321.5" x2="881.5" y1="692.4746" y2="692.4746"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="333.5" y="680.0771">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="281" x="346.5" y="672.4219">Return Endpoint details for Payer-Participant</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="346.5" y="687.7324">Error codes:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="430.5" y="687.7324">3202, 3203</text><line style="stroke:#A80036;stroke-width:1.0;" x1="316.5" x2="358.5" y1="751.7852" y2="751.7852"/><line style="stroke:#A80036;stroke-width:1.0;" x1="358.5" x2="358.5" y1="751.7852" y2="764.7852"/><line style="stroke:#A80036;stroke-width:1.0;" x1="317.5" x2="358.5" y1="764.7852" y2="764.7852"/><polygon fill="#A80036" points="327.5,760.7852,317.5,764.7852,327.5,768.7852,323.5,764.7852" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="323.5" y="747.043">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="512" x="336.5" y="747.043">Construct NotifyCmd Command Message with enriched message &amp; endpoint data</text><path d="M321,777.7852 L321,940.7852 L798,940.7852 L798,787.7852 L788,777.7852 L321,777.7852 " fill="#FFFF00" filter="url(#fxsbkwoyln07u)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M788,777.7852 L788,787.7852 L798,787.7852 L788,777.7852 " fill="#FFFF00" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="327" y="795.3535">"transport": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="343" y="810.6641">"type": "HTTP",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="343" y="825.9746">"method": "PUT",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="343" y="841.2852">"recipient": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="424" x="359" y="856.5957">"endpoint": "http://Payer-Participant/transfers/{{transferId}}/error",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="359" y="871.9063">"params": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="375" y="887.2168">"transferId": "{transferId}"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="359" y="902.5273">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="343" y="917.8379">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="327" y="933.1484">}</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="199.5" x2="979.5" y1="950.8906" y2="950.8906"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="576" x="204.5" y="961.5254">[event.type === 'notification' &amp;&amp; event.action === 'prepare-duplicate' &amp;&amp; event.status === 'success']</text><polygon fill="#A80036" points="327.5,997.4668,317.5,1001.4668,327.5,1005.4668,323.5,1001.4668" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="875.5,997.4668,885.5,1001.4668,875.5,1005.4668,879.5,1001.4668" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="321.5" x2="881.5" y1="1001.4668" y2="1001.4668"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="333.5" y="989.0693">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="281" x="346.5" y="981.4141">Return Endpoint details for Payer-Participant</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="346.5" y="996.7246">Error codes:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="430.5" y="996.7246">3202, 3203</text><line style="stroke:#A80036;stroke-width:1.0;" x1="316.5" x2="358.5" y1="1060.7773" y2="1060.7773"/><line style="stroke:#A80036;stroke-width:1.0;" x1="358.5" x2="358.5" y1="1060.7773" y2="1073.7773"/><line style="stroke:#A80036;stroke-width:1.0;" x1="317.5" x2="358.5" y1="1073.7773" y2="1073.7773"/><polygon fill="#A80036" points="327.5,1069.7773,317.5,1073.7773,327.5,1077.7773,323.5,1073.7773" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="323.5" y="1056.0352">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="512" x="336.5" y="1056.0352">Construct NotifyCmd Command Message with enriched message &amp; endpoint data</text><path d="M321,1086.7773 L321,1249.7773 L798,1249.7773 L798,1096.7773 L788,1086.7773 L321,1086.7773 " fill="#FFFF00" filter="url(#fxsbkwoyln07u)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M788,1086.7773 L788,1096.7773 L798,1096.7773 L788,1086.7773 " fill="#FFFF00" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="327" y="1104.3457">"transport": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="343" y="1119.6563">"type": "HTTP",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="343" y="1134.9668">"method": "PUT",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="343" y="1150.2773">"recipient": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="424" x="359" y="1165.5879">"endpoint": "http://Payer-Participant/transfers/{{transferId}}/error",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="359" y="1180.8984">"params": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="375" y="1196.209">"transferId": "{transferId}"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="359" y="1211.5195">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="343" y="1226.8301">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="327" y="1242.1406">}</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="199.5" x2="979.5" y1="1259.8828" y2="1259.8828"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="564" x="204.5" y="1270.5176">[event.type === 'notification' &amp;&amp; event.action === 'commit|reserve' &amp;&amp; event.status === 'success']</text><polygon fill="#A80036" points="327.5,1306.459,317.5,1310.459,327.5,1314.459,323.5,1310.459" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="875.5,1306.459,885.5,1310.459,875.5,1314.459,879.5,1310.459" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="321.5" x2="881.5" y1="1310.459" y2="1310.459"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="333.5" y="1298.0615">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="281" x="346.5" y="1290.4063">Return Endpoint details for Payer-Participant</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="346.5" y="1305.7168">Error codes:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="430.5" y="1305.7168">3202, 3203</text><line style="stroke:#A80036;stroke-width:1.0;" x1="316.5" x2="358.5" y1="1369.7695" y2="1369.7695"/><line style="stroke:#A80036;stroke-width:1.0;" x1="358.5" x2="358.5" y1="1369.7695" y2="1382.7695"/><line style="stroke:#A80036;stroke-width:1.0;" x1="317.5" x2="358.5" y1="1382.7695" y2="1382.7695"/><polygon fill="#A80036" points="327.5,1378.7695,317.5,1382.7695,327.5,1386.7695,323.5,1382.7695" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="323.5" y="1365.0273">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="512" x="345.5" y="1365.0273">Construct NotifyCmd Command Message with enriched message &amp; endpoint data</text><path d="M321,1395.7695 L321,1558.7695 L761,1558.7695 L761,1405.7695 L751,1395.7695 L321,1395.7695 " fill="#FFFF00" filter="url(#fxsbkwoyln07u)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M751,1395.7695 L751,1405.7695 L761,1405.7695 L751,1395.7695 " fill="#FFFF00" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="327" y="1413.3379">"transport": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="343" y="1428.6484">"type": "HTTP",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="343" y="1443.959">"method": "PUT",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="343" y="1459.2695">"recipient": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="387" x="359" y="1474.5801">"endpoint": "http://Payer-Participant/transfers/{{transferId}}",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="359" y="1489.8906">"params": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="375" y="1505.2012">"transferId": "{transferId}"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="359" y="1520.5117">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="343" y="1535.8223">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="327" y="1551.1328">}</text><path d="M209.5,1574.875 L271.5,1574.875 L271.5,1581.875 L261.5,1591.875 L209.5,1591.875 L209.5,1574.875 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="311.3477" style="stroke:#000000;stroke-width:2.0;" width="760" x="209.5" y="1574.875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="224.5" y="1588.4434">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="611" x="286.5" y="1587.5098">[(Config.SEND_TRANSFER_CONFIRMATION_TO_PAYEE === true || event.action === 'reserve') &amp;&amp; to!=from]</text><polygon fill="#A80036" points="327.5,1624.8066,317.5,1628.8066,327.5,1632.8066,323.5,1628.8066" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="875.5,1624.8066,885.5,1628.8066,875.5,1632.8066,879.5,1628.8066" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="321.5" x2="881.5" y1="1628.8066" y2="1628.8066"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="333.5" y="1616.4092">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="283" x="355.5" y="1608.7539">Return Endpoint details for Payee-Participant</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="355.5" y="1624.0645">Error codes:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="439.5" y="1624.0645">3202, 3203</text><line style="stroke:#A80036;stroke-width:1.0;" x1="316.5" x2="358.5" y1="1688.1172" y2="1688.1172"/><line style="stroke:#A80036;stroke-width:1.0;" x1="358.5" x2="358.5" y1="1688.1172" y2="1701.1172"/><line style="stroke:#A80036;stroke-width:1.0;" x1="317.5" x2="358.5" y1="1701.1172" y2="1701.1172"/><polygon fill="#A80036" points="327.5,1697.1172,317.5,1701.1172,327.5,1705.1172,323.5,1701.1172" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="323.5" y="1683.375">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="512" x="345.5" y="1683.375">Construct NotifyCmd Command Message with enriched message &amp; endpoint data</text><path d="M321,1714.1172 L321,1877.1172 L763,1877.1172 L763,1724.1172 L753,1714.1172 L321,1714.1172 " fill="#FFFF00" filter="url(#fxsbkwoyln07u)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M753,1714.1172 L753,1724.1172 L763,1724.1172 L753,1714.1172 " fill="#FFFF00" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="327" y="1731.6855">"transport": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="343" y="1746.9961">"type": "HTTP",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="343" y="1762.3066">"method": "PUT",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="343" y="1777.6172">"recipient": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="389" x="359" y="1792.9277">"endpoint": "http://Payee-Participant/transfers/{{transferId}}",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="359" y="1808.2383">"params": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="375" y="1823.5488">"transferId": "{transferId}"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="359" y="1838.8594">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="343" y="1854.1699">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="327" y="1869.4805">}</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="199.5" x2="979.5" y1="1894.2227" y2="1894.2227"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="540" x="204.5" y="1904.8574">[event.type === 'notification' &amp;&amp; event.action === 'reject|abort' &amp;&amp; event.status === 'success']</text><polygon fill="#A80036" points="327.5,1940.7988,317.5,1944.7988,327.5,1948.7988,323.5,1944.7988" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="875.5,1940.7988,885.5,1944.7988,875.5,1948.7988,879.5,1944.7988" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="321.5" x2="881.5" y1="1944.7988" y2="1944.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="333.5" y="1932.4014">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="283" x="355.5" y="1924.7461">Return Endpoint details for Payee-Participant</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="355.5" y="1940.0566">Error codes:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="439.5" y="1940.0566">3202, 3203</text><line style="stroke:#A80036;stroke-width:1.0;" x1="316.5" x2="358.5" y1="2004.1094" y2="2004.1094"/><line style="stroke:#A80036;stroke-width:1.0;" x1="358.5" x2="358.5" y1="2004.1094" y2="2017.1094"/><line style="stroke:#A80036;stroke-width:1.0;" x1="317.5" x2="358.5" y1="2017.1094" y2="2017.1094"/><polygon fill="#A80036" points="327.5,2013.1094,317.5,2017.1094,327.5,2021.1094,323.5,2017.1094" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="323.5" y="1999.3672">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="512" x="345.5" y="1999.3672">Construct NotifyCmd Command Message with enriched message &amp; endpoint data</text><path d="M321,2030.1094 L321,2193.1094 L800,2193.1094 L800,2040.1094 L790,2030.1094 L321,2030.1094 " fill="#FFFF00" filter="url(#fxsbkwoyln07u)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M790,2030.1094 L790,2040.1094 L800,2040.1094 L790,2030.1094 " fill="#FFFF00" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="327" y="2047.6777">"transport": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="343" y="2062.9883">"type": "HTTP",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="343" y="2078.2988">"method": "PUT",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="343" y="2093.6094">"recipient": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="426" x="359" y="2108.9199">"endpoint": "http://Payee-Participant/transfers/{{transferId}}/error",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="359" y="2124.2305">"params": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="375" y="2139.541">"transferId": "{transferId}"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="359" y="2154.8516">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="343" y="2170.1621">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="327" y="2185.4727">}</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="199.5" x2="979.5" y1="2203.2148" y2="2203.2148"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="549" x="204.5" y="2213.8496">[event.type === 'notification' &amp;&amp; event.action === 'commit|reserve' &amp;&amp; event.status === 'error']</text><polygon fill="#A80036" points="327.5,2249.791,317.5,2253.791,327.5,2257.791,323.5,2253.791" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="875.5,2249.791,885.5,2253.791,875.5,2257.791,879.5,2253.791" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="321.5" x2="881.5" y1="2253.791" y2="2253.791"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="333.5" y="2241.3936">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="283" x="355.5" y="2233.7383">Return Endpoint details for Payee-Participant</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="355.5" y="2249.0488">Error codes:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="439.5" y="2249.0488">3202, 3203</text><line style="stroke:#A80036;stroke-width:1.0;" x1="316.5" x2="358.5" y1="2313.1016" y2="2313.1016"/><line style="stroke:#A80036;stroke-width:1.0;" x1="358.5" x2="358.5" y1="2313.1016" y2="2326.1016"/><line style="stroke:#A80036;stroke-width:1.0;" x1="317.5" x2="358.5" y1="2326.1016" y2="2326.1016"/><polygon fill="#A80036" points="327.5,2322.1016,317.5,2326.1016,327.5,2330.1016,323.5,2326.1016" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="323.5" y="2308.3594">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="512" x="345.5" y="2308.3594">Construct NotifyCmd Command Message with enriched message &amp; endpoint data</text><path d="M321,2339.1016 L321,2502.1016 L800,2502.1016 L800,2349.1016 L790,2339.1016 L321,2339.1016 " fill="#FFFF00" filter="url(#fxsbkwoyln07u)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M790,2339.1016 L790,2349.1016 L800,2349.1016 L790,2339.1016 " fill="#FFFF00" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="327" y="2356.6699">"transport": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="343" y="2371.9805">"type": "HTTP",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="343" y="2387.291">"method": "PUT",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="343" y="2402.6016">"recipient": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="426" x="359" y="2417.9121">"endpoint": "http://Payee-Participant/transfers/{{transferId}}/error",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="359" y="2433.2227">"params": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="375" y="2448.5332">"transferId": "{transferId}"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="359" y="2463.8438">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="343" y="2479.1543">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="327" y="2494.4648">}</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="199.5" x2="979.5" y1="2512.207" y2="2512.207"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="558" x="204.5" y="2522.8418">[event.type === 'notification' &amp;&amp; event.action === 'timeout-received' &amp;&amp; event.status === 'error']</text><polygon fill="#A80036" points="327.5,2558.7832,317.5,2562.7832,327.5,2566.7832,323.5,2562.7832" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="875.5,2558.7832,885.5,2562.7832,875.5,2566.7832,879.5,2562.7832" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="321.5" x2="881.5" y1="2562.7832" y2="2562.7832"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="333.5" y="2550.3857">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="283" x="355.5" y="2542.7305">Return Endpoint details for Payee-Participant</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="355.5" y="2558.041">Error codes:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="439.5" y="2558.041">3202, 3203</text><line style="stroke:#A80036;stroke-width:1.0;" x1="316.5" x2="358.5" y1="2622.0938" y2="2622.0938"/><line style="stroke:#A80036;stroke-width:1.0;" x1="358.5" x2="358.5" y1="2622.0938" y2="2635.0938"/><line style="stroke:#A80036;stroke-width:1.0;" x1="317.5" x2="358.5" y1="2635.0938" y2="2635.0938"/><polygon fill="#A80036" points="327.5,2631.0938,317.5,2635.0938,327.5,2639.0938,323.5,2635.0938" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="323.5" y="2617.3516">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="512" x="345.5" y="2617.3516">Construct NotifyCmd Command Message with enriched message &amp; endpoint data</text><path d="M321,2648.0938 L321,2811.0938 L800,2811.0938 L800,2658.0938 L790,2648.0938 L321,2648.0938 " fill="#FFFF00" filter="url(#fxsbkwoyln07u)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M790,2648.0938 L790,2658.0938 L800,2658.0938 L790,2648.0938 " fill="#FFFF00" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="327" y="2665.6621">"transport": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="343" y="2680.9727">"type": "HTTP",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="343" y="2696.2832">"method": "PUT",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="343" y="2711.5938">"recipient": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="426" x="359" y="2726.9043">"endpoint": "http://Payee-Participant/transfers/{{transferId}}/error",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="359" y="2742.2148">"params": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="375" y="2757.5254">"transferId": "{transferId}"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="359" y="2772.8359">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="343" y="2788.1465">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="327" y="2803.457">}</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="199.5" x2="979.5" y1="2821.1992" y2="2821.1992"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="574" x="204.5" y="2831.834">[event.type === 'notification' &amp;&amp; event.action === 'timeout-reserved' &amp;&amp; event.status === 'success']</text><polygon fill="#A80036" points="327.5,2867.7754,317.5,2871.7754,327.5,2875.7754,323.5,2871.7754" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="875.5,2867.7754,885.5,2871.7754,875.5,2875.7754,879.5,2871.7754" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="321.5" x2="881.5" y1="2871.7754" y2="2871.7754"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="333.5" y="2859.3779">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="281" x="355.5" y="2851.7227">Return Endpoint details for Payer-Participant</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="355.5" y="2867.0332">Error codes:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="439.5" y="2867.0332">3202, 3203</text><line style="stroke:#A80036;stroke-width:1.0;" x1="316.5" x2="358.5" y1="2931.0859" y2="2931.0859"/><line style="stroke:#A80036;stroke-width:1.0;" x1="358.5" x2="358.5" y1="2931.0859" y2="2944.0859"/><line style="stroke:#A80036;stroke-width:1.0;" x1="317.5" x2="358.5" y1="2944.0859" y2="2944.0859"/><polygon fill="#A80036" points="327.5,2940.0859,317.5,2944.0859,327.5,2948.0859,323.5,2944.0859" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="323.5" y="2926.3438">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="512" x="345.5" y="2926.3438">Construct NotifyCmd Command Message with enriched message &amp; endpoint data</text><path d="M321,2957.0859 L321,3120.0859 L798,3120.0859 L798,2967.0859 L788,2957.0859 L321,2957.0859 " fill="#FFFF00" filter="url(#fxsbkwoyln07u)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M788,2957.0859 L788,2967.0859 L798,2967.0859 L788,2957.0859 " fill="#FFFF00" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="327" y="2974.6543">"transport": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="343" y="2989.9648">"type": "HTTP",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="343" y="3005.2754">"method": "PUT",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="343" y="3020.5859">"recipient": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="424" x="359" y="3035.8965">"endpoint": "http://Payer-Participant/transfers/{{transferId}}/error",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="359" y="3051.207">"params": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="375" y="3066.5176">"transferId": "{transferId}"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="359" y="3081.8281">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="343" y="3097.1387">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="327" y="3112.4492">}</text><polygon fill="#A80036" points="327.5,3161.8125,317.5,3165.8125,327.5,3169.8125,323.5,3165.8125" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="875.5,3161.8125,885.5,3165.8125,875.5,3169.8125,879.5,3165.8125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="321.5" x2="881.5" y1="3165.8125" y2="3165.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="333.5" y="3153.415">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="283" x="355.5" y="3145.7598">Return Endpoint details for Payee-Participant</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="355.5" y="3161.0703">Error codes:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="439.5" y="3161.0703">3202, 3203</text><line style="stroke:#A80036;stroke-width:1.0;" x1="316.5" x2="358.5" y1="3225.123" y2="3225.123"/><line style="stroke:#A80036;stroke-width:1.0;" x1="358.5" x2="358.5" y1="3225.123" y2="3238.123"/><line style="stroke:#A80036;stroke-width:1.0;" x1="317.5" x2="358.5" y1="3238.123" y2="3238.123"/><polygon fill="#A80036" points="327.5,3234.123,317.5,3238.123,327.5,3242.123,323.5,3238.123" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="323.5" y="3220.3809">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="512" x="345.5" y="3220.3809">Construct NotifyCmd Command Message with enriched message &amp; endpoint data</text><path d="M321,3251.123 L321,3414.123 L800,3414.123 L800,3261.123 L790,3251.123 L321,3251.123 " fill="#FFFF00" filter="url(#fxsbkwoyln07u)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M790,3251.123 L790,3261.123 L800,3261.123 L790,3251.123 " fill="#FFFF00" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="327" y="3268.6914">"transport": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="343" y="3284.002">"type": "HTTP",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="343" y="3299.3125">"method": "PUT",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="343" y="3314.623">"recipient": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="426" x="359" y="3329.9336">"endpoint": "http://Payee-Participant/transfers/{{transferId}}/error",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="359" y="3345.2441">"params": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="375" y="3360.5547">"transferId": "{transferId}"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="359" y="3375.8652">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="343" y="3391.1758">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="327" y="3406.4863">}</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="199.5" x2="979.5" y1="3424.2285" y2="3424.2285"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="493" x="204.5" y="3434.8633">[event.type === 'notification' &amp;&amp; event.action === 'get' &amp;&amp; event.status === 'success']</text><polygon fill="#A80036" points="327.5,3470.8047,317.5,3474.8047,327.5,3478.8047,323.5,3474.8047" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="875.5,3470.8047,885.5,3474.8047,875.5,3478.8047,879.5,3474.8047" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="321.5" x2="881.5" y1="3474.8047" y2="3474.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="333.5" y="3462.4072">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="318" x="355.5" y="3454.752">Return Endpoint details for Requesting-Participant</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="355.5" y="3470.0625">Error codes:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="439.5" y="3470.0625">3202, 3203</text><line style="stroke:#A80036;stroke-width:1.0;" x1="316.5" x2="358.5" y1="3534.1152" y2="3534.1152"/><line style="stroke:#A80036;stroke-width:1.0;" x1="358.5" x2="358.5" y1="3534.1152" y2="3547.1152"/><line style="stroke:#A80036;stroke-width:1.0;" x1="317.5" x2="358.5" y1="3547.1152" y2="3547.1152"/><polygon fill="#A80036" points="327.5,3543.1152,317.5,3547.1152,327.5,3551.1152,323.5,3547.1152" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="323.5" y="3529.373">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="512" x="345.5" y="3529.373">Construct NotifyCmd Command Message with enriched message &amp; endpoint data</text><path d="M321,3560.1152 L321,3723.1152 L798,3723.1152 L798,3570.1152 L788,3560.1152 L321,3560.1152 " fill="#FFFF00" filter="url(#fxsbkwoyln07u)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M788,3560.1152 L788,3570.1152 L798,3570.1152 L788,3560.1152 " fill="#FFFF00" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="327" y="3577.6836">"transport": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="343" y="3592.9941">"type": "HTTP",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="343" y="3608.3047">"method": "PUT",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="343" y="3623.6152">"recipient": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="424" x="359" y="3638.9258">"endpoint": "http://Requesting-Participant/transfers/{{transferId}}",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="359" y="3654.2363">"params": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="375" y="3669.5469">"transferId": "{transferId}"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="359" y="3684.8574">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="343" y="3700.168">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="327" y="3715.4785">}</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="199.5" x2="979.5" y1="3733.2207" y2="3733.2207"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="478" x="204.5" y="3743.8555">[event.type === 'notification' &amp;&amp; event.action === 'get' &amp;&amp; event.status === 'error']</text><polygon fill="#A80036" points="327.5,3779.7969,317.5,3783.7969,327.5,3787.7969,323.5,3783.7969" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="875.5,3779.7969,885.5,3783.7969,875.5,3787.7969,879.5,3783.7969" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="321.5" x2="881.5" y1="3783.7969" y2="3783.7969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="333.5" y="3771.3994">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="318" x="355.5" y="3763.7441">Return Endpoint details for Requesting-Participant</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="355.5" y="3779.0547">Error codes:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="439.5" y="3779.0547">3202, 3203</text><line style="stroke:#A80036;stroke-width:1.0;" x1="316.5" x2="358.5" y1="3843.1074" y2="3843.1074"/><line style="stroke:#A80036;stroke-width:1.0;" x1="358.5" x2="358.5" y1="3843.1074" y2="3856.1074"/><line style="stroke:#A80036;stroke-width:1.0;" x1="317.5" x2="358.5" y1="3856.1074" y2="3856.1074"/><polygon fill="#A80036" points="327.5,3852.1074,317.5,3856.1074,327.5,3860.1074,323.5,3856.1074" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="323.5" y="3838.3652">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="512" x="345.5" y="3838.3652">Construct NotifyCmd Command Message with enriched message &amp; endpoint data</text><path d="M321,3869.1074 L321,4032.1074 L835,4032.1074 L835,3879.1074 L825,3869.1074 L321,3869.1074 " fill="#FFFF00" filter="url(#fxsbkwoyln07u)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M825,3869.1074 L825,3879.1074 L835,3879.1074 L825,3869.1074 " fill="#FFFF00" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="327" y="3886.6758">"transport": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="343" y="3901.9863">"type": "HTTP",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="343" y="3917.2969">"method": "PUT",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="343" y="3932.6074">"recipient": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="461" x="359" y="3947.918">"endpoint": "http://Requesting-Participant/transfers/{{transferId}}/error",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="359" y="3963.2285">"params": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="375" y="3978.5391">"transferId": "{transferId}"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="359" y="3993.8496">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="343" y="4009.1602">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="327" y="4024.4707">}</text><line style="stroke:#A80036;stroke-width:1.0;" x1="316.5" x2="358.5" y1="4076.5234" y2="4076.5234"/><line style="stroke:#A80036;stroke-width:1.0;" x1="358.5" x2="358.5" y1="4076.5234" y2="4089.5234"/><line style="stroke:#A80036;stroke-width:1.0;" x1="317.5" x2="358.5" y1="4089.5234" y2="4089.5234"/><polygon fill="#A80036" points="327.5,4085.5234,317.5,4089.5234,327.5,4093.5234,323.5,4089.5234" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="323.5" y="4071.7813">27</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="535" x="345.5" y="4071.7813">Construct NotifyCmd Command Message with notficiation-payload &amp; transport-data</text><path d="M209.5,4104.5234 L533.5,4104.5234 L533.5,4111.5234 L523.5,4121.5234 L209.5,4121.5234 L209.5,4104.5234 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:2.0;" width="1072" x="209.5" y="4104.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="279" x="224.5" y="4118.0918">For-each NotifyCmd Command Messages</text><polygon fill="#A80036" points="1165,4139.1445,1175,4143.1445,1165,4147.1445,1169,4143.1445" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="316.5" x2="1171" y1="4143.1445" y2="4143.1445"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="323.5" y="4138.4023">28</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="244" x="345.5" y="4138.4023">Publish NotifyCmd Command Message</text><polygon fill="#A80036" points="109.5,4175.4551,99.5,4179.4551,109.5,4183.4551,105.5,4179.4551" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="103.5" x2="305.5" y1="4179.4551" y2="4179.4551"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="115.5" y="4174.7129">29</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="137.5" y="4174.7129">Commit Notification event</text><polygon fill="#A80036" points="1198,4234.7656,1188,4238.7656,1198,4242.7656,1194,4238.7656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1192" x2="1484" y1="4238.7656" y2="4238.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1204" y="4234.0234">30</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="257" x="1226" y="4234.0234">Consume NotifyCmd Command Message</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1495" x2="1537" y1="4298.0762" y2="4298.0762"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1537" x2="1537" y1="4298.0762" y2="4311.0762"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1496" x2="1537" y1="4311.0762" y2="4311.0762"/><polygon fill="#A80036" points="1506,4307.0762,1496,4311.0762,1506,4315.0762,1502,4311.0762" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1502" y="4293.334">31</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="1524" y="4293.334">Construct Transport Message</text><path d="M1390.5,4326.0762 L1810.5,4326.0762 L1810.5,4333.0762 L1800.5,4343.0762 L1390.5,4343.0762 L1390.5,4326.0762 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="283.6582" style="stroke:#000000;stroke-width:2.0;" width="884.5" x="1390.5" y="4326.0762"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="375" x="1405.5" y="4339.6445">Retry Transport Mechanism based on transport options</text><path d="M1500,4348.3867 L1500,4511.3867 L2261,4511.3867 L2261,4358.3867 L2251,4348.3867 L1500,4348.3867 " fill="#FFFF00" filter="url(#fxsbkwoyln07u)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M2251,4348.3867 L2251,4358.3867 L2261,4358.3867 L2251,4348.3867 " fill="#FFFF00" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="1506" y="4365.9551">"transport": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="1522" y="4381.2656">"options": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="1538" y="4396.5762">"deliveryReport": true,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="1538" y="4411.8867">"retry": {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="1538" y="4427.1973">"count": 3,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="1538" y="4442.5078">"type": "noDelay|exponentialDelay",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="708" x="1538" y="4457.8184">"condition": "isNetworkError|isSafeRequestError|isIdempotentRequestError|isNetworkOrIdempotentRequestError"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="1538" y="4473.1289">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="1522" y="4488.4395">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="1506" y="4503.75">}</text><polygon fill="#A80036" points="1959.5,4568.4238,1969.5,4572.4238,1959.5,4576.4238,1963.5,4572.4238" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1495" x2="1965.5" y1="4572.4238" y2="4572.4238"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1502" y="4552.3711">32</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="287" x="1524" y="4537.0605">Notification with Prepare/fulfil result/error to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246" x="1524" y="4552.3711">Payer DFSP to specified Endpoint - PUT</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="1524" y="4567.6816">Error code:</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="1601" y="4567.6816">1001</text><polygon fill="#A80036" points="1506,4597.7344,1496,4601.7344,1506,4605.7344,1502,4601.7344" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1500" x2="1970.5" y1="4601.7344" y2="4601.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1512" y="4596.9922">33</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="1534" y="4596.9922">HTTP 200 OK</text><line style="stroke:#A80036;stroke-width:1.0;" x1="1495" x2="1537" y1="4638.0449" y2="4638.0449"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1537" x2="1537" y1="4638.0449" y2="4651.0449"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1496" x2="1537" y1="4651.0449" y2="4651.0449"/><polygon fill="#A80036" points="1506,4647.0449,1496,4651.0449,1506,4655.0449,1502,4651.0449" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1502" y="4633.3027">34</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="1524" y="4633.3027">Prepare Delivery Report</text><path d="M209.5,4666.0449 L271.5,4666.0449 L271.5,4673.0449 L261.5,4683.0449 L209.5,4683.0449 L209.5,4666.0449 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="134.5527" style="stroke:#000000;stroke-width:2.0;" width="1633" x="209.5" y="4666.0449"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="224.5" y="4679.6133">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="244" x="286.5" y="4678.6797">[transport.options.deliver-report === true]</text><polygon fill="#A80036" points="1743,4700.666,1753,4704.666,1743,4708.666,1747,4704.666" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1495" x2="1749" y1="4704.666" y2="4704.666"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1502" y="4699.9238">35</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="219" x="1524" y="4699.9238">Publish NotifyDeliveryReport event</text><polygon fill="#A80036" points="1748,4729.9766,1758,4733.9766,1748,4737.9766,1752,4733.9766" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="316.5" x2="1754" y1="4733.9766" y2="4733.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="323.5" y="4729.2344">36</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="345.5" y="4729.2344">Consume NotifyDeliveryReport event</text><polygon fill="#A80036" points="1014,4759.2871,1024,4763.2871,1014,4767.2871,1018,4763.2871" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="316.5" x2="1020" y1="4763.2871" y2="4763.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="323.5" y="4758.5449">37</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="345.5" y="4758.5449">Record NotifyDeliveryReport event</text><polygon fill="#A80036" points="1743,4788.5977,1753,4792.5977,1743,4796.5977,1747,4792.5977" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="311.5" x2="1749" y1="4792.5977" y2="4792.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="318.5" y="4787.8555">38</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="340.5" y="4787.8555">Commit NotifyDeliveryReport event</text><polygon fill="#A80036" points="1198,4824.9082,1188,4828.9082,1198,4832.9082,1194,4828.9082" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1192" x2="1484" y1="4828.9082" y2="4828.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1204" y="4824.166">39</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="1226" y="4824.166">Commit NotifyCmd event</text><!--MD5=[3a6f71a1eca4b3b243d545989e60f512]
@startuml
' declate title
title 1.0.0. Send Notification to Participant (Payer/Payee) (single message) v2.0

autonumber

' Actor Keys:
'   actor - Payer DFSP, Payee DFSP
'   boundary - APIs/Interfaces, etc
'   collections - Kafka Topics
'   control - Kafka Consumers
'   entity - Database Access Objects
'   database - Database Persistance Store

' declare actors
' actor "Payer DFSP\nParticipant" as PAYER_DFSP
actor "Participant" as PARTICIPANT
control "Notification Event Handler" as NOTIFY_HANDLER_EVT
control "Notification Cmd Handler" as NOTIFY_HANDLER_CMD
boundary "Central Service API" as CSAPI
collections "Notification-Topic" as TOPIC_NOTIFICATIONS
collections "NotificationsCommand" as TOPIC_NOTIFICATIONS_CMD
collections "NotificationsEvent" as TOPIC_NOTIFICATIONS_EVT
' entity "Participant DAO" as PARTICIPANT_DAO
' entity "Notifications DAO" as NOTIFICATIONS_DAO
database "Persistant Store" as DB

' box "Financial Service Provider (Payer)" #lightGray
' 	participant PAYER_DFSP
' end box

' box "ML API Adapter Service" #LightBlue
' 	participant NOTIFY_HANDLER
' end box

box "Central Service" #LightYellow
    participant TOPIC_NOTIFICATIONS
    participant NOTIFY_HANDLER_EVT
    participant CSAPI
    ' participant NOTIFICATIONS_DAO
    participant DB
    participant TOPIC_NOTIFICATIONS_EVT
    ' participant PARTICIPANT_DAO
    ' participant DB
end box

box "Notification Engine" #LightCyan
    participant TOPIC_NOTIFICATIONS_CMD
    participant NOTIFY_HANDLER_CMD
    participant TOPIC_NOTIFICATIONS_EVT
end box

box "Financial Service Provider (Participant)" #lightGray
	participant PARTICIPANT
end box

' start flow
group Send notification to Participants
    ' note left of NOTIFY_HANDLER_EVT #yellow
    '     Message:
    '     {
    '         payload: {
    '             endpoint: {
    '                 type: <typeValue>,
    '                 value: <endpointValue>
    '            }
    '         }
    '     }
    ' end note

    TOPIC_NOTIFICATIONS <- NOTIFY_HANDLER_EVT: Consume Notification event
    activate NOTIFY_HANDLER_EVT
    activate TOPIC_NOTIFICATIONS
    deactivate TOPIC_NOTIFICATIONS

    alt transport.options.deliver-report === true
        NOTIFY_HANDLER_EVT -> DB: Record Notification event
    end

    ' put logic here to route command-type based on incoming events
    group Routing logic
        alt event.type === 'notification' && event.action === 'prepare' && event.status === 'success'
            CSAPI <-> NOTIFY_HANDLER_EVT: Return Endpoint details for Payee-Participant\n<color #FF0000><b>Error codes:</b> 3202, 3203</color>
            activate CSAPI
            deactivate CSAPI

            NOTIFY_HANDLER_EVT -> NOTIFY_HANDLER_EVT: Construct NotifyCmd Command Message with enriched message & endpoint data
            note right of NOTIFY_HANDLER_EVT #yellow
                "transport": {
                    "type": "HTTP",
                    "method": "POST",
                    "recipient": {
                        "endpoint": "http://Payee-Participant/transfers/{{transferId}}",
                        "params": {
                            "transferId": "{transferId}"
                        }
                    }
                }
            end note
        else event.type === 'notification' && event.action === 'prepare.*|position-prepare' && event.status === 'error'
            CSAPI <-> NOTIFY_HANDLER_EVT: Return Endpoint details for Payer-Participant\n<color #FF0000><b>Error codes:</b> 3202, 3203</color>
            activate CSAPI
            deactivate CSAPI

            NOTIFY_HANDLER_EVT -> NOTIFY_HANDLER_EVT: Construct NotifyCmd Command Message with enriched message & endpoint data
            note right of NOTIFY_HANDLER_EVT #yellow
                "transport": {
                    "type": "HTTP",
                    "method": "PUT",
                    "recipient": {
                        "endpoint": "http://Payer-Participant/transfers/{{transferId}}/error",
                        "params": {
                            "transferId": "{transferId}"
                        }
                    }
                }
            end note
        else event.type === 'notification' && event.action === 'prepare-duplicate' && event.status === 'success'
            CSAPI <-> NOTIFY_HANDLER_EVT: Return Endpoint details for Payer-Participant\n<color #FF0000><b>Error codes:</b> 3202, 3203</color>
            activate CSAPI
            deactivate CSAPI

            NOTIFY_HANDLER_EVT -> NOTIFY_HANDLER_EVT: Construct NotifyCmd Command Message with enriched message & endpoint data
            note right of NOTIFY_HANDLER_EVT #yellow
                "transport": {
                    "type": "HTTP",
                    "method": "PUT",
                    "recipient": {
                        "endpoint": "http://Payer-Participant/transfers/{{transferId}}/error",
                        "params": {
                            "transferId": "{transferId}"
                        }
                    }
                }
            end note
       else event.type === 'notification' && event.action === 'commit|reserve' && event.status === 'success'
            CSAPI <-> NOTIFY_HANDLER_EVT: Return Endpoint details for Payer-Participant\n<color #FF0000><b>Error codes:</b> 3202, 3203</color>
            activate CSAPI
            deactivate CSAPI

            NOTIFY_HANDLER_EVT -> NOTIFY_HANDLER_EVT: Construct NotifyCmd Command Message with enriched message & endpoint data
            note right of NOTIFY_HANDLER_EVT #yellow
                "transport": {
                    "type": "HTTP",
                    "method": "PUT",
                    "recipient": {
                        "endpoint": "http://Payer-Participant/transfers/{{transferId}}",
                        "params": {
                            "transferId": "{transferId}"
                        }
                    }
                }
            end note
            
            ' Notes:
            '   - To confirm if action=reserve results in sending out a payee notification <- - I assume this is for FSPIOP v1.1 changes
            '   - This is also only applicabble for "off-us" transfers
            alt (Config.SEND_TRANSFER_CONFIRMATION_TO_PAYEE === true || event.action === 'reserve') && to!=from
                CSAPI <-> NOTIFY_HANDLER_EVT: Return Endpoint details for Payee-Participant\n<color #FF0000><b>Error codes:</b> 3202, 3203</color>
                activate CSAPI
                deactivate CSAPI

                NOTIFY_HANDLER_EVT -> NOTIFY_HANDLER_EVT: Construct NotifyCmd Command Message with enriched message & endpoint data
                note right of NOTIFY_HANDLER_EVT #yellow
                    "transport": {
                        "type": "HTTP",
                        "method": "PUT",
                        "recipient": {
                            "endpoint": "http://Payee-Participant/transfers/{{transferId}}",
                            "params": {
                                "transferId": "{transferId}"
                            }
                        }
                    }
                end note
            end
        else event.type === 'notification' && event.action === 'reject|abort' && event.status === 'success'
            CSAPI <-> NOTIFY_HANDLER_EVT: Return Endpoint details for Payee-Participant\n<color #FF0000><b>Error codes:</b> 3202, 3203</color>
            activate CSAPI
            deactivate CSAPI

            NOTIFY_HANDLER_EVT -> NOTIFY_HANDLER_EVT: Construct NotifyCmd Command Message with enriched message & endpoint data
            note right of NOTIFY_HANDLER_EVT #yellow
                "transport": {
                    "type": "HTTP",
                    "method": "PUT",
                    "recipient": {
                        "endpoint": "http://Payee-Participant/transfers/{{transferId}}/error",
                        "params": {
                            "transferId": "{transferId}"
                        }
                    }
                }
            end note
        else event.type === 'notification' && event.action === 'commit|reserve' && event.status === 'error'
            CSAPI <-> NOTIFY_HANDLER_EVT: Return Endpoint details for Payee-Participant\n<color #FF0000><b>Error codes:</b> 3202, 3203</color>
            activate CSAPI
            deactivate CSAPI

            NOTIFY_HANDLER_EVT -> NOTIFY_HANDLER_EVT: Construct NotifyCmd Command Message with enriched message & endpoint data
            note right of NOTIFY_HANDLER_EVT #yellow
                "transport": {
                    "type": "HTTP",
                    "method": "PUT",
                    "recipient": {
                        "endpoint": "http://Payee-Participant/transfers/{{transferId}}/error",
                        "params": {
                            "transferId": "{transferId}"
                        }
                    }
                }
            end note
        else event.type === 'notification' && event.action === 'timeout-received' && event.status === 'error'
            CSAPI <-> NOTIFY_HANDLER_EVT: Return Endpoint details for Payee-Participant\n<color #FF0000><b>Error codes:</b> 3202, 3203</color>
            activate CSAPI
            deactivate CSAPI

            NOTIFY_HANDLER_EVT -> NOTIFY_HANDLER_EVT: Construct NotifyCmd Command Message with enriched message & endpoint data
            note right of NOTIFY_HANDLER_EVT #yellow
                "transport": {
                    "type": "HTTP",
                    "method": "PUT",
                    "recipient": {
                        "endpoint": "http://Payee-Participant/transfers/{{transferId}}/error",
                        "params": {
                            "transferId": "{transferId}"
                        }
                    }
                }
            end note
        else event.type === 'notification' && event.action === 'timeout-reserved' && event.status === 'success'
            CSAPI <-> NOTIFY_HANDLER_EVT: Return Endpoint details for Payer-Participant\n<color #FF0000><b>Error codes:</b> 3202, 3203</color>
            activate CSAPI
            deactivate CSAPI

            NOTIFY_HANDLER_EVT -> NOTIFY_HANDLER_EVT: Construct NotifyCmd Command Message with enriched message & endpoint data
            note right of NOTIFY_HANDLER_EVT #yellow
                "transport": {
                    "type": "HTTP",
                    "method": "PUT",
                    "recipient": {
                        "endpoint": "http://Payer-Participant/transfers/{{transferId}}/error",
                        "params": {
                            "transferId": "{transferId}"
                        }
                    }
                }
            end note
            
            ' Notes:
            '   - To confirm if action=reserve results in sending out a payee notification <- - I assume this is for FSPIOP v1.1 changes
            '   - This is also only applicabble for "off-us" transfers
            ' alt (Config.SEND_TRANSFER_CONFIRMATION_TO_PAYEE === true || event.action === 'reserve') && to!=from
            CSAPI <-> NOTIFY_HANDLER_EVT: Return Endpoint details for Payee-Participant\n<color #FF0000><b>Error codes:</b> 3202, 3203</color>
            activate CSAPI
            deactivate CSAPI

            NOTIFY_HANDLER_EVT -> NOTIFY_HANDLER_EVT: Construct NotifyCmd Command Message with enriched message & endpoint data
            note right of NOTIFY_HANDLER_EVT #yellow
                "transport": {
                    "type": "HTTP",
                    "method": "PUT",
                    "recipient": {
                        "endpoint": "http://Payee-Participant/transfers/{{transferId}}/error",
                        "params": {
                            "transferId": "{transferId}"
                        }
                    }
                }
            end note
            ' end
        else event.type === 'notification' && event.action === 'get' && event.status === 'success'
            CSAPI <-> NOTIFY_HANDLER_EVT: Return Endpoint details for Requesting-Participant\n<color #FF0000><b>Error codes:</b> 3202, 3203</color>
            activate CSAPI
            deactivate CSAPI

            NOTIFY_HANDLER_EVT -> NOTIFY_HANDLER_EVT: Construct NotifyCmd Command Message with enriched message & endpoint data
            note right of NOTIFY_HANDLER_EVT #yellow
                "transport": {
                    "type": "HTTP",
                    "method": "PUT",
                    "recipient": {
                        "endpoint": "http://Requesting-Participant/transfers/{{transferId}}",
                        "params": {
                            "transferId": "{transferId}"
                        }
                    }
                }
            end note
        else event.type === 'notification' && event.action === 'get' && event.status === 'error'
            CSAPI <-> NOTIFY_HANDLER_EVT: Return Endpoint details for Requesting-Participant\n<color #FF0000><b>Error codes:</b> 3202, 3203</color>
            activate CSAPI
            deactivate CSAPI

            NOTIFY_HANDLER_EVT -> NOTIFY_HANDLER_EVT: Construct NotifyCmd Command Message with enriched message & endpoint data
            note right of NOTIFY_HANDLER_EVT #yellow
                "transport": {
                    "type": "HTTP",
                    "method": "PUT",
                    "recipient": {
                        "endpoint": "http://Requesting-Participant/transfers/{{transferId}}/error",
                        "params": {
                            "transferId": "{transferId}"
                        }
                    }
                }
            end note
        end
    end
    

    NOTIFY_HANDLER_EVT -> NOTIFY_HANDLER_EVT: Construct NotifyCmd Command Message with notficiation-payload & transport-data
    group For-each NotifyCmd Command Messages
        NOTIFY_HANDLER_EVT -> TOPIC_NOTIFICATIONS_CMD: Publish NotifyCmd Command Message
        activate TOPIC_NOTIFICATIONS_CMD
    end
    

    NOTIFY_HANDLER_EVT -> TOPIC_NOTIFICATIONS: Commit Notification event
    activate TOPIC_NOTIFICATIONS
    deactivate TOPIC_NOTIFICATIONS
    deactivate NOTIFY_HANDLER_EVT
    
    
    TOPIC_NOTIFICATIONS_CMD <- NOTIFY_HANDLER_CMD: Consume NotifyCmd Command Message
    activate NOTIFY_HANDLER_CMD
    deactivate TOPIC_NOTIFICATIONS_CMD

    NOTIFY_HANDLER_CMD -> NOTIFY_HANDLER_CMD: Construct Transport Message

    ' retry logic goes here
    group Retry Transport Mechanism based on transport options
        note right of NOTIFY_HANDLER_CMD #yellow
            "transport": {
                "options": {
                    "deliveryReport": true,
                    "retry": {
                    "count": 3,
                    "type": "noDelay|exponentialDelay",
                    "condition": "isNetworkError|isSafeRequestError|isIdempotentRequestError|isNetworkOrIdempotentRequestError"
                    }
                }
            }
        end note
        NOTIFY_HANDLER_CMD -> PARTICIPANT: Notification with Prepare/fulfil result/error to \nPayer DFSP to specified Endpoint - PUT \n<color #FF0000><b>Error code:</b> 1001</color>
        NOTIFY_HANDLER_CMD <- - PARTICIPANT: HTTP 200 OK 
    end

    NOTIFY_HANDLER_CMD -> NOTIFY_HANDLER_CMD: Prepare Delivery Report

    alt transport.options.deliver-report === true
        NOTIFY_HANDLER_CMD -> TOPIC_NOTIFICATIONS_EVT: Publish NotifyDeliveryReport event
        activate TOPIC_NOTIFICATIONS_EVT

        TOPIC_NOTIFICATIONS_EVT <- NOTIFY_HANDLER_EVT: Consume NotifyDeliveryReport event
        deactivate TOPIC_NOTIFICATIONS_EVT
        activate NOTIFY_HANDLER_EVT

        NOTIFY_HANDLER_EVT -> DB: Record NotifyDeliveryReport event
        

        NOTIFY_HANDLER_EVT -> TOPIC_NOTIFICATIONS_EVT: Commit NotifyDeliveryReport event
        deactivate NOTIFY_HANDLER_EVT
        activate TOPIC_NOTIFICATIONS_EVT
        deactivate TOPIC_NOTIFICATIONS_EVT
    end

    NOTIFY_HANDLER_CMD -> TOPIC_NOTIFICATIONS_CMD: Commit NotifyCmd event
    activate TOPIC_NOTIFICATIONS_CMD
    deactivate TOPIC_NOTIFICATIONS_CMD
    deactivate NOTIFY_HANDLER_CMD

end
@enduml

@startuml
title 1.0.0. Send Notification to Participant (Payer/Payee) (single message) v2.0

autonumber


actor "Participant" as PARTICIPANT
control "Notification Event Handler" as NOTIFY_HANDLER_EVT
control "Notification Cmd Handler" as NOTIFY_HANDLER_CMD
boundary "Central Service API" as CSAPI
collections "Notification-Topic" as TOPIC_NOTIFICATIONS
collections "NotificationsCommand" as TOPIC_NOTIFICATIONS_CMD
collections "NotificationsEvent" as TOPIC_NOTIFICATIONS_EVT
database "Persistant Store" as DB



box "Central Service" #LightYellow
    participant TOPIC_NOTIFICATIONS
    participant NOTIFY_HANDLER_EVT
    participant CSAPI
    participant DB
    participant TOPIC_NOTIFICATIONS_EVT
end box

box "Notification Engine" #LightCyan
    participant TOPIC_NOTIFICATIONS_CMD
    participant NOTIFY_HANDLER_CMD
    participant TOPIC_NOTIFICATIONS_EVT
end box

box "Financial Service Provider (Participant)" #lightGray
	participant PARTICIPANT
end box

group Send notification to Participants

    TOPIC_NOTIFICATIONS <- NOTIFY_HANDLER_EVT: Consume Notification event
    activate NOTIFY_HANDLER_EVT
    activate TOPIC_NOTIFICATIONS
    deactivate TOPIC_NOTIFICATIONS

    alt transport.options.deliver-report === true
        NOTIFY_HANDLER_EVT -> DB: Record Notification event
    end

    group Routing logic
        alt event.type === 'notification' && event.action === 'prepare' && event.status === 'success'
            CSAPI <-> NOTIFY_HANDLER_EVT: Return Endpoint details for Payee-Participant\n<color #FF0000><b>Error codes:</b> 3202, 3203</color>
            activate CSAPI
            deactivate CSAPI

            NOTIFY_HANDLER_EVT -> NOTIFY_HANDLER_EVT: Construct NotifyCmd Command Message with enriched message & endpoint data
            note right of NOTIFY_HANDLER_EVT #yellow
                "transport": {
                    "type": "HTTP",
                    "method": "POST",
                    "recipient": {
                        "endpoint": "http://Payee-Participant/transfers/{{transferId}}",
                        "params": {
                            "transferId": "{transferId}"
                        }
                    }
                }
            end note
        else event.type === 'notification' && event.action === 'prepare.*|position-prepare' && event.status === 'error'
            CSAPI <-> NOTIFY_HANDLER_EVT: Return Endpoint details for Payer-Participant\n<color #FF0000><b>Error codes:</b> 3202, 3203</color>
            activate CSAPI
            deactivate CSAPI

            NOTIFY_HANDLER_EVT -> NOTIFY_HANDLER_EVT: Construct NotifyCmd Command Message with enriched message & endpoint data
            note right of NOTIFY_HANDLER_EVT #yellow
                "transport": {
                    "type": "HTTP",
                    "method": "PUT",
                    "recipient": {
                        "endpoint": "http://Payer-Participant/transfers/{{transferId}}/error",
                        "params": {
                            "transferId": "{transferId}"
                        }
                    }
                }
            end note
        else event.type === 'notification' && event.action === 'prepare-duplicate' && event.status === 'success'
            CSAPI <-> NOTIFY_HANDLER_EVT: Return Endpoint details for Payer-Participant\n<color #FF0000><b>Error codes:</b> 3202, 3203</color>
            activate CSAPI
            deactivate CSAPI

            NOTIFY_HANDLER_EVT -> NOTIFY_HANDLER_EVT: Construct NotifyCmd Command Message with enriched message & endpoint data
            note right of NOTIFY_HANDLER_EVT #yellow
                "transport": {
                    "type": "HTTP",
                    "method": "PUT",
                    "recipient": {
                        "endpoint": "http://Payer-Participant/transfers/{{transferId}}/error",
                        "params": {
                            "transferId": "{transferId}"
                        }
                    }
                }
            end note
       else event.type === 'notification' && event.action === 'commit|reserve' && event.status === 'success'
            CSAPI <-> NOTIFY_HANDLER_EVT: Return Endpoint details for Payer-Participant\n<color #FF0000><b>Error codes:</b> 3202, 3203</color>
            activate CSAPI
            deactivate CSAPI

            NOTIFY_HANDLER_EVT -> NOTIFY_HANDLER_EVT: Construct NotifyCmd Command Message with enriched message & endpoint data
            note right of NOTIFY_HANDLER_EVT #yellow
                "transport": {
                    "type": "HTTP",
                    "method": "PUT",
                    "recipient": {
                        "endpoint": "http://Payer-Participant/transfers/{{transferId}}",
                        "params": {
                            "transferId": "{transferId}"
                        }
                    }
                }
            end note
            
            alt (Config.SEND_TRANSFER_CONFIRMATION_TO_PAYEE === true || event.action === 'reserve') && to!=from
                CSAPI <-> NOTIFY_HANDLER_EVT: Return Endpoint details for Payee-Participant\n<color #FF0000><b>Error codes:</b> 3202, 3203</color>
                activate CSAPI
                deactivate CSAPI

                NOTIFY_HANDLER_EVT -> NOTIFY_HANDLER_EVT: Construct NotifyCmd Command Message with enriched message & endpoint data
                note right of NOTIFY_HANDLER_EVT #yellow
                    "transport": {
                        "type": "HTTP",
                        "method": "PUT",
                        "recipient": {
                            "endpoint": "http://Payee-Participant/transfers/{{transferId}}",
                            "params": {
                                "transferId": "{transferId}"
                            }
                        }
                    }
                end note
            end
        else event.type === 'notification' && event.action === 'reject|abort' && event.status === 'success'
            CSAPI <-> NOTIFY_HANDLER_EVT: Return Endpoint details for Payee-Participant\n<color #FF0000><b>Error codes:</b> 3202, 3203</color>
            activate CSAPI
            deactivate CSAPI

            NOTIFY_HANDLER_EVT -> NOTIFY_HANDLER_EVT: Construct NotifyCmd Command Message with enriched message & endpoint data
            note right of NOTIFY_HANDLER_EVT #yellow
                "transport": {
                    "type": "HTTP",
                    "method": "PUT",
                    "recipient": {
                        "endpoint": "http://Payee-Participant/transfers/{{transferId}}/error",
                        "params": {
                            "transferId": "{transferId}"
                        }
                    }
                }
            end note
        else event.type === 'notification' && event.action === 'commit|reserve' && event.status === 'error'
            CSAPI <-> NOTIFY_HANDLER_EVT: Return Endpoint details for Payee-Participant\n<color #FF0000><b>Error codes:</b> 3202, 3203</color>
            activate CSAPI
            deactivate CSAPI

            NOTIFY_HANDLER_EVT -> NOTIFY_HANDLER_EVT: Construct NotifyCmd Command Message with enriched message & endpoint data
            note right of NOTIFY_HANDLER_EVT #yellow
                "transport": {
                    "type": "HTTP",
                    "method": "PUT",
                    "recipient": {
                        "endpoint": "http://Payee-Participant/transfers/{{transferId}}/error",
                        "params": {
                            "transferId": "{transferId}"
                        }
                    }
                }
            end note
        else event.type === 'notification' && event.action === 'timeout-received' && event.status === 'error'
            CSAPI <-> NOTIFY_HANDLER_EVT: Return Endpoint details for Payee-Participant\n<color #FF0000><b>Error codes:</b> 3202, 3203</color>
            activate CSAPI
            deactivate CSAPI

            NOTIFY_HANDLER_EVT -> NOTIFY_HANDLER_EVT: Construct NotifyCmd Command Message with enriched message & endpoint data
            note right of NOTIFY_HANDLER_EVT #yellow
                "transport": {
                    "type": "HTTP",
                    "method": "PUT",
                    "recipient": {
                        "endpoint": "http://Payee-Participant/transfers/{{transferId}}/error",
                        "params": {
                            "transferId": "{transferId}"
                        }
                    }
                }
            end note
        else event.type === 'notification' && event.action === 'timeout-reserved' && event.status === 'success'
            CSAPI <-> NOTIFY_HANDLER_EVT: Return Endpoint details for Payer-Participant\n<color #FF0000><b>Error codes:</b> 3202, 3203</color>
            activate CSAPI
            deactivate CSAPI

            NOTIFY_HANDLER_EVT -> NOTIFY_HANDLER_EVT: Construct NotifyCmd Command Message with enriched message & endpoint data
            note right of NOTIFY_HANDLER_EVT #yellow
                "transport": {
                    "type": "HTTP",
                    "method": "PUT",
                    "recipient": {
                        "endpoint": "http://Payer-Participant/transfers/{{transferId}}/error",
                        "params": {
                            "transferId": "{transferId}"
                        }
                    }
                }
            end note
            
            CSAPI <-> NOTIFY_HANDLER_EVT: Return Endpoint details for Payee-Participant\n<color #FF0000><b>Error codes:</b> 3202, 3203</color>
            activate CSAPI
            deactivate CSAPI

            NOTIFY_HANDLER_EVT -> NOTIFY_HANDLER_EVT: Construct NotifyCmd Command Message with enriched message & endpoint data
            note right of NOTIFY_HANDLER_EVT #yellow
                "transport": {
                    "type": "HTTP",
                    "method": "PUT",
                    "recipient": {
                        "endpoint": "http://Payee-Participant/transfers/{{transferId}}/error",
                        "params": {
                            "transferId": "{transferId}"
                        }
                    }
                }
            end note
        else event.type === 'notification' && event.action === 'get' && event.status === 'success'
            CSAPI <-> NOTIFY_HANDLER_EVT: Return Endpoint details for Requesting-Participant\n<color #FF0000><b>Error codes:</b> 3202, 3203</color>
            activate CSAPI
            deactivate CSAPI

            NOTIFY_HANDLER_EVT -> NOTIFY_HANDLER_EVT: Construct NotifyCmd Command Message with enriched message & endpoint data
            note right of NOTIFY_HANDLER_EVT #yellow
                "transport": {
                    "type": "HTTP",
                    "method": "PUT",
                    "recipient": {
                        "endpoint": "http://Requesting-Participant/transfers/{{transferId}}",
                        "params": {
                            "transferId": "{transferId}"
                        }
                    }
                }
            end note
        else event.type === 'notification' && event.action === 'get' && event.status === 'error'
            CSAPI <-> NOTIFY_HANDLER_EVT: Return Endpoint details for Requesting-Participant\n<color #FF0000><b>Error codes:</b> 3202, 3203</color>
            activate CSAPI
            deactivate CSAPI

            NOTIFY_HANDLER_EVT -> NOTIFY_HANDLER_EVT: Construct NotifyCmd Command Message with enriched message & endpoint data
            note right of NOTIFY_HANDLER_EVT #yellow
                "transport": {
                    "type": "HTTP",
                    "method": "PUT",
                    "recipient": {
                        "endpoint": "http://Requesting-Participant/transfers/{{transferId}}/error",
                        "params": {
                            "transferId": "{transferId}"
                        }
                    }
                }
            end note
        end
    end
    

    NOTIFY_HANDLER_EVT -> NOTIFY_HANDLER_EVT: Construct NotifyCmd Command Message with notficiation-payload & transport-data
    group For-each NotifyCmd Command Messages
        NOTIFY_HANDLER_EVT -> TOPIC_NOTIFICATIONS_CMD: Publish NotifyCmd Command Message
        activate TOPIC_NOTIFICATIONS_CMD
    end
    

    NOTIFY_HANDLER_EVT -> TOPIC_NOTIFICATIONS: Commit Notification event
    activate TOPIC_NOTIFICATIONS
    deactivate TOPIC_NOTIFICATIONS
    deactivate NOTIFY_HANDLER_EVT
    
    
    TOPIC_NOTIFICATIONS_CMD <- NOTIFY_HANDLER_CMD: Consume NotifyCmd Command Message
    activate NOTIFY_HANDLER_CMD
    deactivate TOPIC_NOTIFICATIONS_CMD

    NOTIFY_HANDLER_CMD -> NOTIFY_HANDLER_CMD: Construct Transport Message

    group Retry Transport Mechanism based on transport options
        note right of NOTIFY_HANDLER_CMD #yellow
            "transport": {
                "options": {
                    "deliveryReport": true,
                    "retry": {
                    "count": 3,
                    "type": "noDelay|exponentialDelay",
                    "condition": "isNetworkError|isSafeRequestError|isIdempotentRequestError|isNetworkOrIdempotentRequestError"
                    }
                }
            }
        end note
        NOTIFY_HANDLER_CMD -> PARTICIPANT: Notification with Prepare/fulfil result/error to \nPayer DFSP to specified Endpoint - PUT \n<color #FF0000><b>Error code:</b> 1001</color>
        NOTIFY_HANDLER_CMD <- - PARTICIPANT: HTTP 200 OK 
    end

    NOTIFY_HANDLER_CMD -> NOTIFY_HANDLER_CMD: Prepare Delivery Report

    alt transport.options.deliver-report === true
        NOTIFY_HANDLER_CMD -> TOPIC_NOTIFICATIONS_EVT: Publish NotifyDeliveryReport event
        activate TOPIC_NOTIFICATIONS_EVT

        TOPIC_NOTIFICATIONS_EVT <- NOTIFY_HANDLER_EVT: Consume NotifyDeliveryReport event
        deactivate TOPIC_NOTIFICATIONS_EVT
        activate NOTIFY_HANDLER_EVT

        NOTIFY_HANDLER_EVT -> DB: Record NotifyDeliveryReport event
        

        NOTIFY_HANDLER_EVT -> TOPIC_NOTIFICATIONS_EVT: Commit NotifyDeliveryReport event
        deactivate NOTIFY_HANDLER_EVT
        activate TOPIC_NOTIFICATIONS_EVT
        deactivate TOPIC_NOTIFICATIONS_EVT
    end

    NOTIFY_HANDLER_CMD -> TOPIC_NOTIFICATIONS_CMD: Commit NotifyCmd event
    activate TOPIC_NOTIFICATIONS_CMD
    deactivate TOPIC_NOTIFICATIONS_CMD
    deactivate NOTIFY_HANDLER_CMD

end
@enduml

PlantUML version 1.2020.22(Sun Dec 06 11:36:27 SAST 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>